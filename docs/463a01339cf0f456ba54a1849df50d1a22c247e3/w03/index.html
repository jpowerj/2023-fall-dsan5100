<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jeff Jacobs">

<title>Week 3: Conditional Probability</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"></script><script src="../jjcustom.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../w03/index.html">Week 3: Sep 7</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">DSAN 5100 Section 03 (Thursdays, 12:30-3pm)</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://jfh.georgetown.domains/dsan5100/" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-arrow-left" style="margin-right: 4px"></i>Main Course Page</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-house pe-1"></i> Section 03 Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1: Aug 24</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2: Aug 31</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w03/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Week 3: Sep 7</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4: Sep 14</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5: Sep 20</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w06/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 6: Sep 27</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w07/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 7: Oct 5</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w08/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 8: Oct 12</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w09/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 9: Oct 19</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recordings/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture Recordings</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../extra-videos/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra Videos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../writeups/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra Writeups</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cheatsheet-math.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Math Cheatsheet</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://georgetown.instructure.com/courses/173333" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Canvas Page <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://calendar.app.google/yMnESMtMNPdKEaPz5" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Book Office Hours <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://forms.gle/QBT621Vmcez4Y99r5" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Suggestion Box <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://jjacobs.me/dsps" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Textbook <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div><div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="_bday-solutions-plot.ipynb.html"><i class="bi bi-journal-code"></i>_bday-solutions-plot.ipynb</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 3: Conditional Probability</h1>
<p class="subtitle lead"><em>DSAN 5100: Probabilistic Modeling and Statistical Computing</em><br>Section 03</p>
  <div class="quarto-categories">
    <div class="quarto-category">Class Sessions</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Jeff Jacobs </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="mailto:jj1088@georgetown.edu" target="_blank"><code>jj1088@georgetown.edu</code></a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Thursday, September 7, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<center>
<a class="h2" href="./slides.html" target="_blank">Open slides in new window →</a>
</center>
<section id="schedule" class="level1 smaller smaller-title" data-name="Schedule">
<h1 class="smaller smaller-title" data-name="Schedule">Schedule</h1>
<div class="hidden">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"../_globals.r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 54%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Start</th>
<th style="text-align: left;">End</th>
<th style="text-align: left;">Topic</th>
<th style="text-align: center;">Recording</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Lecture</strong></td>
<td style="text-align: left;">12:30pm</td>
<td style="text-align: left;">12:40pm</td>
<td style="text-align: left;"><a href="#recap">Recap →</a></td>
<td style="text-align: center;"><a href="../recordings/recording-w03-1.html" target="_blank"><i class="bi bi-film"></i></a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">12:40pm</td>
<td style="text-align: left;">1:20pm</td>
<td style="text-align: left;"><a href="#what-is-conditional-probability">What is Conditional Probability? →</a></td>
<td style="text-align: center;"><a href="./recording-w03-2.html" target="_blank"><i class="bi bi-film"></i></a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">1:20pm</td>
<td style="text-align: left;">2:00pm</td>
<td style="text-align: left;"><a href="#bayes-theorem-and-its-implications">Bayes’ Theorem and its Implications →</a></td>
<td style="text-align: center;"><a href="./recording-w03-3.html" target="_blank"><i class="bi bi-film"></i></a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Break!</strong></td>
<td style="text-align: left;">2:00pm</td>
<td style="text-align: left;">2:10pm</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Lab</strong></td>
<td style="text-align: left;">2:10pm</td>
<td style="text-align: left;">2:50pm</td>
<td style="text-align: left;"><a href="https://jfh.georgetown.domains/dsan5100/share-point/labs/lab-1/lab-1-demo.html" target="_blank">Lab 2 Demonstrations <i class="bi bi-box-arrow-up-right" style="font-size: 1.2rem;"></i></a></td>
<td style="text-align: center;"><a href="./recording-w03-4.html" target="_blank"><i class="bi bi-film"></i></a></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">2:50pm</td>
<td style="text-align: left;">3:00pm</td>
<td style="text-align: left;"><a href="https://jfh.georgetown.domains/dsan5100/share-point/labs/lab-1/lab-1-assignment.html" target="_blank">Lab 2 Assignment Overview <i class="bi bi-box-arrow-up-right" style="font-size: 1.2rem;"></i></a></td>
<td style="text-align: center;"><a href="./recording-w03-5.html" target="_blank"><i class="bi bi-film"></i></a></td>
</tr>
</tbody>
</table>
</section>
<section id="recap" class="level1" data-stack-name="Recap">
<h1 data-stack-name="Recap">Recap</h1>
<section id="recap-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="recap-1">Recap</h2>
<ul>
<li>Logic <span class="math inline">\(\rightarrow\)</span> Set Theory <span class="math inline">\(\rightarrow\)</span> Probability Theory</li>
<li>Entirety of probability theory can be derived from <strong>two axioms</strong>:</li>
</ul>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="The Entirety of Probability Theory Follows From...">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The Entirety of Probability Theory Follows From…
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Axiom 1</strong> (<em>Unitarity</em>): <span class="math inline">\(\Pr(\Omega) = 1\)</span> (The probability that <strong>something</strong> happens is 1)</p>
<p><strong>Axiom 2</strong> (<em><span class="math inline">\(\sigma\)</span>-additivity</em>): For mutually-exclusive events <span class="math inline">\(E_1, E_2, \ldots\)</span>,</p>
<p><span class="math display">\[
\underbrace{\Pr\left(\bigcup_{i=1}^{\infty}E_i\right)}_{\Pr(E_1\text{ occurs }\vee E_2\text{ occurs } \vee \cdots)} = \underbrace{\sum_{i=1}^{\infty}\Pr(E_i)}_{\Pr(E_1\text{ occurs}) + \Pr(E_2\text{ occurs}) + \cdots}
\]</span></p>
</div>
</div>
<ul>
<li>But what does “mutually exclusive” mean…?</li>
</ul>
</section>
<section id="venn-diagrams-sets" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="venn-diagrams-sets">Venn Diagrams: Sets</h2>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div id="fig-venn-mutex" class="quarto-figure quarto-figure-center anchored" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><span class="math display">\[
\begin{align*}
&amp;A = \{0, 1, 2\}, \; B = \{4, 5, 6\} \\
&amp;\implies A \cap B = \varnothing
\end{align*}
\]</span></p>
<figcaption class="figure-caption">Figure&nbsp;1: Mutually-exclusive (disjoint) sets</figcaption>
</figure>
</div>
<div id="fig-venn" class="quarto-figure quarto-figure-center anchored" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><span class="math display">\[
\begin{align*}
&amp;A = \{1, 2, 3\}, \; B = \{3, 4, 5\} \\
&amp;\implies A \cap B = \{3\}
\end{align*}
\]</span></p>
<figcaption class="figure-caption">Figure&nbsp;2: Non-mutually-exclusive sets</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="venn-diagrams-events-dice" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="venn-diagrams-events-dice">Venn Diagrams: Events (Dice)</h2>
<p><span class="math display">\[
\begin{align*}
A &amp;= \{\text{Roll is even}\} = \{2, 4, 6\} \\
B &amp;= \{\text{Roll is odd}\} = \{1, 3, 5\} \\
C &amp;= \{\text{Roll is in Fibonnaci sequence}\} = \{1, 2, 3, 5\}
\end{align*}
\]</span></p>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 30%">
<col style="width: 27%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Set 1</th>
<th>Set 2</th>
<th>Intersection</th>
<th>Mutually Exclusive?</th>
<th>Can Happen Simultaneously?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(A\)</span></td>
<td><span class="math inline">\(B\)</span></td>
<td><span class="math inline">\(A \cap B = \varnothing\)</span></td>
<td><strong>Yes</strong></td>
<td><strong>No</strong></td>
</tr>
<tr class="even">
<td><span class="math inline">\(A\)</span></td>
<td><span class="math inline">\(C\)</span></td>
<td><span class="math inline">\(A \cap C = \{2\}\)</span></td>
<td><strong>No</strong></td>
<td><strong>Yes</strong></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(B\)</span></td>
<td><span class="math inline">\(C\)</span></td>
<td><span class="math inline">\(B \cap C = \{1, 3, 5\}\)</span></td>
<td><strong>No</strong></td>
<td><strong>Yes</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="rules-of-probability" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="rules-of-probability">“Rules” of Probability</h2>
<ul>
<li>(Remember: not <em>“rules”</em> but <em>“facts resulting from the logic <span class="math inline">\(\leftrightarrow\)</span> probability connection”</em>)</li>
</ul>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="&quot;Rules&quot; of Probability">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
“Rules” of Probability
</div>
</div>
<div class="callout-body-container callout-body">
<p>For logical predicates <span class="math inline">\(p, q \in \{T, F\}\)</span>, events <span class="math inline">\(P, Q\)</span> defined so <span class="math inline">\(P\)</span> = event that <span class="math inline">\(p\)</span> becomes true, <span class="math inline">\(Q\)</span> = event that <span class="math inline">\(q\)</span> becomes true,</p>
<ol type="1">
<li><strong>Logical AND = Probabilistic Multiplication</strong></li>
</ol>
<p><span class="math display">\[
\Pr(p \wedge q) = \Pr(P \cap Q) = \Pr(P) \cdot \Pr(Q)
\]</span></p>
<ol start="2" type="1">
<li><strong>Logical OR = Probabilistic Addition</strong></li>
</ol>
<p><span class="math display">\[
\Pr(p \vee q) = \Pr(P \cup Q) = \Pr(P) + \Pr(Q) - \underbrace{\Pr(P \cap Q)}_{\text{(see rule 1)}}
\]</span></p>
<ol start="3" type="1">
<li><strong>Logical NOT = Probabilistic Complement</strong></li>
</ol>
<p><span class="math display">\[
\Pr(\neg p) = \Pr(P^c) = 1 - \Pr(P)
\]</span></p>
</div>
</div>
</section>
</section>
<section id="what-is-conditional-probability" class="level1" data-stack-name="Conditional Prob">
<h1 data-stack-name="Conditional Prob">What is Conditional Probability?</h1>
<section id="conditional-probability" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="conditional-probability">Conditional Probability</h2>
<ul>
<li>Usually if someone asks you probabilistic questions, like
<ul>
<li>“What is the likelihood that [our team] wins?”</li>
<li>“Do you think it will rain tomorrow?” and so on</li>
</ul></li>
<li>You don’t guess a random number, you <strong>consider</strong> and <strong>incorporate evidence</strong>.</li>
<li>Example: <span class="math inline">\(\Pr(\text{rain})\)</span> on its own, without any other info? A tough question… maybe <span class="math inline">\(0.5\)</span>?</li>
<li>In reality, we would think about
<ul>
<li><span class="math inline">\(\Pr(\text{rain} \mid \text{month of the year})\)</span></li>
<li><span class="math inline">\(\Pr(\text{rain} \mid \text{where we live})\)</span></li>
<li><span class="math inline">\(\Pr(\text{rain} \mid \text{did it rain yesterday?})\)</span></li>
</ul></li>
<li>Psychologically, breaks down into two steps: (1) Think of a <strong>baseline probability</strong>, (2) <strong>Update</strong> baseline probability to incorporate <strong>relevant evidence</strong> (more on this in a bit…)</li>
<li>Also recall from last week: <strong>all</strong> probability is <strong>conditional</strong> probability, even if just conditioned on “something happened” (<span class="math inline">\(\Omega\)</span>, the thing defined so <span class="math inline">\(\Pr(\Omega) = 1\)</span>)</li>
</ul>
</section>
<section id="naïve-definition-2.0" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="naïve-definition-2.0">Naïve Definition 2.0</h2>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="[Slightly Less] Naïve Definition of Probability">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
[Slightly Less] Naïve Definition of Probability
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math display">\[
\Pr(A \mid B) = \frac{\text{\# of Desired Outcomes in world where }B\text{ happened}}{\text{\# Total outcomes in world where }B\text{ happened}} = \frac{|B \cap A|}{|B|}
\]</span></p>
</div>
</div>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 50%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th>World Name</th>
<th>Weather in World</th>
<th style="text-align: center;">Likelihood of Rain Today</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(R\)</span></td>
<td><strong>Rained for the past 5 days</strong></td>
<td style="text-align: center;"><span class="math inline">\(\Pr(\text{rain} \mid R) &gt; 0.5\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(M\)</span></td>
<td><strong>Mix of rain and non-rain over past 5 days</strong></td>
<td style="text-align: center;"><span class="math inline">\(\Pr(\text{rain} \mid M) \approx 0.5\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(S\)</span></td>
<td><strong>Sunny for the past 5 days</strong></td>
<td style="text-align: center;"><span class="math inline">\(\Pr(\text{rain} \mid S) &lt; 0.5\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="law-of-total-probability" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="law-of-total-probability">Law of Total Probability</h2>
<ul>
<li>Suppose the events <span class="math inline">\(B_1, \ldots, B_k\)</span> form a partition of the space <span class="math inline">\(S\)</span> and <span class="math inline">\(\Pr(B_j) &gt; 0 \forall j\)</span>.</li>
<li>Then, for every event <span class="math inline">\(A\)</span> in <span class="math inline">\(S\)</span>,</li>
</ul>
<p><span class="math display">\[
\Pr(A) = \sum_{i=1}^k \Pr(B_j)\Pr(A \mid B_j)
\]</span></p>
<ul>
<li>Probability of an event is the sum of its conditional probabilities across all conditions.</li>
<li>In other words: <span class="math inline">\(A\)</span> is some event, <span class="math inline">\(B_1, \ldots, B_n\)</span> are mutually exclusive events filling entire sample-space, then</li>
</ul>
<p><span class="math display">\[
\Pr(A) = \Pr(A \mid B_1)\Pr(B_1) + \Pr(A \mid B_2)\Pr(B_2) + \cdots + \Pr(A \mid B_n)\Pr(B_n)
\]</span></p>
<p>i.e.&nbsp;Compute the probability by <strong>summing over all possible cases</strong>.</p>
</section>
<section id="example" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="example">Example</h2>
<ul>
<li>Probabilities of completing a job on time, with and without rain, are 0.42 and 0.90 respectively.</li>
<li>Probability it will rain is 0.45. What is the probability the job will be completed on time?</li>
<li><span class="math inline">\(A\)</span> = job will be completed on time, <span class="math inline">\(B\)</span> = rain</li>
</ul>
<p><span class="math display">\[
\Pr(B) = 0.45 \implies \Pr(B^c) = 1 - \Pr(B) = 0.55.
\]</span></p>
<ul>
<li>Note: Events <span class="math inline">\(B\)</span> and <span class="math inline">\(B^c\)</span> are exclusive and form partitions of the sample space <span class="math inline">\(S\)</span></li>
<li>We know <span class="math inline">\(\Pr(A \mid B) = 0.24\)</span>, <span class="math inline">\(\Pr(A \mid B^c) = 0.9\)</span>.</li>
<li>By the Law of Total Probability, we have</li>
</ul>
<p><span class="math display">\[
\begin{align*}
\Pr(A) &amp;= \Pr(B)\Pr(A \mid B) + \Pr(B^c)\Pr(A \mid B^c) \\
&amp;= 0.45(0.42) + 0.55(0.9) = 0.189 + 0.495 = 0684.
\end{align*}
\]</span></p>
<p>So, the probability that the job will be completed on time is <strong>0.684</strong>. <a href="https://byjus.com/maths/total-probability-theorem/" target="_blank">(source)</a></p>
</section>
</section>
<section id="bayes-theorem-and-its-implications" class="level1" data-stack-name="Bayes">
<h1 data-stack-name="Bayes">Bayes’ Theorem and its Implications</h1>
<section id="deriving-bayes-theorem" class="level2 smaller crunch-math">
<h2 class="smaller crunch-math anchored" data-anchor-id="deriving-bayes-theorem">Deriving Bayes’ Theorem</h2>
<ul>
<li>Literally just a re-writing of the conditional probability definition (don’t be scared)!</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<ol type="1">
<li>For two events <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, definition of conditional probability says that</li>
</ol>
<p><span class="math display">\[
\begin{align*}
\Pr(A \mid B) &amp;= \frac{\Pr(A \cap B)}{\Pr(B)} \tag{1} \\
\Pr(B \mid A) &amp;= \frac{\Pr(B \cap A)}{\Pr(A)} \tag{2}
\end{align*}
\]</span></p>
<ol start="2" type="1">
<li>Multiply to get rid of fractions</li>
</ol>
<p><span class="math display">\[
\begin{align*}
\Pr(A \mid B)\Pr(B) &amp;= \Pr(A \cap B) \tag{1*} \\
\Pr(B \mid A)\Pr(A) &amp;= \Pr(B \cap A) \tag{2*}
\end{align*}
\]</span></p>
</div><div class="column" style="width:50%;">
<ol start="3" type="1">
<li>But <strong>set intersection</strong> is <strong>associative</strong> (just like multiplication…), <span class="math inline">\(A \cap B = B \cap A\)</span>! So, we know LHS of <span class="math inline">\((\text{1*})\)</span> = LHS of <span class="math inline">\((\text{2*})\)</span>:</li>
</ol>
<p><span class="math display">\[
\Pr(A \mid B)\Pr(B) = \Pr(B \mid A)\Pr(A)
\]</span></p>
<ol start="4" type="1">
<li>Divide both sides by <span class="math inline">\(\Pr(B)\)</span> to get a <strong>new definition</strong> of <span class="math inline">\(\Pr(A \mid B)\)</span>, <strong>Bayes’ Theorem</strong>!</li>
</ol>
<div id="fig-bayes-thm" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><span class="math display">\[
\boxed{\Pr(A \mid B) = \frac{\Pr(B \mid A)\Pr(A)}{\Pr(B)}}
\]</span></p>
<figcaption class="figure-caption">Figure&nbsp;3: Bayes’ Theorem</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="why-is-this-helpful" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="why-is-this-helpful">Why Is This Helpful?</h2>
<div class="callout callout-style-default callout-tip no-icon callout-titled" title="Bayes' Theorem">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bayes’ Theorem
</div>
</div>
<div class="callout-body-container callout-body">
<p>For any two events <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, <span class="math display">\[
\Pr(A \mid B) = \frac{\Pr(B \mid A)\Pr(A)}{\Pr(B)}
\]</span></p>
</div>
</div>
<ul>
<li>In words (as exciting as I can make it, for now): <strong>Bayes’ Theorem allows us to take information about <span class="math inline">\(B \mid A\)</span> and use it to infer information about <span class="math inline">\(A \mid B\)</span></strong></li>
<li>It isn’t until you work through some examples that this becomes mind-blowing, the most powerful equation we have for inferring <strong>unknowns</strong> from <strong>knowns</strong>…</li>
<li>Consider <span class="math inline">\(A = \{\text{person has disease}\}\)</span>, <span class="math inline">\(B = \{\text{person tests positive for disease}\}\)</span>
<ol type="1">
<li>Is <span class="math inline">\(A\)</span> observable on its own? <strong>No</strong>, but…</li>
<li><ol type="a">
<li>Is <span class="math inline">\(B\)</span> observable on its own? <strong>Yes</strong>, and</li>
<li>Can we <strong>infer</strong> information about <span class="math inline">\(A\)</span> from knowing <span class="math inline">\(B\)</span>? <strong>Also Yes, thanks to Bayes!</strong></li>
</ol></li>
<li>Therefore, we can <strong>use <span class="math inline">\(B\)</span> to infer information about <span class="math inline">\(A\)</span></strong>, i.e., calculate <span class="math inline">\(\Pr(A \mid B)\)</span>…</li>
</ol></li>
</ul>
</section>
<section id="why-is-this-helpful-for-data-science" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="why-is-this-helpful-for-data-science">Why Is This Helpful for <em>Data Science</em>?</h2>
<ul>
<li>It merges <strong>probability theory</strong> and <strong>hypothesis testing</strong> into a single framework:</li>
</ul>
<p><span class="math display">\[
\Pr(\text{hypothesis} \mid \text{data}) = \frac{\Pr(\text{data} \mid \text{hypothesis})\Pr(\text{hypothesis})}{\Pr(\text{data})}
\]</span></p>
</section>
<section id="probability-forwards-and-backwards" class="level2 nostretch smaller">
<h2 class="nostretch smaller anchored" data-anchor-id="probability-forwards-and-backwards">Probability Forwards and Backwards</h2>
<ul>
<li><p>Two discrete RVs:</p>
<ul>
<li>Weather on a given day, <span class="math inline">\(W \in \{\textsf{Rain},\textsf{Sun}\}\)</span></li>
<li>Action that day, <span class="math inline">\(A \in \{\textsf{Go}, \textsf{Stay}\}\)</span>: go to party or stay in and watch movie</li>
</ul></li>
<li><p>Data-generating process: if <span class="math inline">\(\textsf{Sun}\)</span>, rolls a die <span class="math inline">\(R\)</span> and goes out unless <span class="math inline">\(R = 6\)</span>. If <span class="math inline">\(\textsf{Rain}\)</span>, flips a coin and goes out if <span class="math inline">\(\textsf{H}\)</span>.</p></li>
<li><p>Probabilistic Graphical Model (PGM):</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pgm.svg" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
</section>
<section id="section" class="level2 unnumbered nostretch">
<h2 class="unnumbered nostretch anchored" data-anchor-id="section"></h2>
<ul>
<li><p>So, if we know <span class="math inline">\(W = \textsf{Sun}\)</span>, what is <span class="math inline">\(P(A = \textsf{Go})\)</span>? <span class="math display">\[
\begin{align*}
P(A = \textsf{Go} \mid W) &amp;= 1 - P(R = 6) \\
&amp;= 1 - \frac{1}{6} = \frac{5}{6}
\end{align*}
\]</span></p></li>
<li><p>Conditional probability lets us go <strong>forwards</strong> (left to right):</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pgm_forwards.svg" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<div class="notes">
<p>But what if we want to perform inference going <strong>backwards</strong>?</p>
</div>
</section>
<section id="section-1" class="level2 unnumbered smaller smallishmath">
<h2 class="unnumbered smaller smallishmath anchored" data-anchor-id="section-1"></h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>If we see Ana at the party, we know <span class="math inline">\(A = \textsf{Go}\)</span></li>
<li>What does this tell us about the weather?</li>
<li>Intuitively, we should increase our degree of belief that <span class="math inline">\(W = \textsf{Sun}\)</span>. But, by how much?</li>
<li>We don’t know <span class="math inline">\(P(W \mid A)\)</span>, only <span class="math inline">\(P(A \mid W)\)</span>…</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/koolaid_bayes.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-2" class="level2 unnumbered smaller">
<h2 class="unnumbered smaller anchored" data-anchor-id="section-2"></h2>
<p><span class="math display">\[
P(W = \textsf{Sun} \mid A = \textsf{Go}) = \frac{\overbrace{P(A = \textsf{Go} \mid W = \textsf{Sun})}^{5/6~ ✅}\overbrace{P(W = \textsf{Sun})}^{❓}}{\underbrace{P(A = \textsf{Go})}_{❓}}
\]</span></p>
<ul>
<li>We’ve seen <span class="math inline">\(P(W = \textsf{Sun})\)</span> before, it’s our <strong>prior</strong>: the probability without having any additional relevant knowledge. So, let’s say 50/50. <span class="math inline">\(P(W = \textsf{Sun}) = \frac{1}{2}\)</span></li>
<li>If we lived in Seattle, we could pick <span class="math inline">\(P(W = \textsf{Sun}) = \frac{1}{4}\)</span></li>
</ul>
</section>
<section id="section-3" class="level2 unnumbered smaller small-math">
<h2 class="unnumbered smaller small-math anchored" data-anchor-id="section-3"></h2>
<p><span class="math display">\[
P(W = \textsf{Sun} \mid A = \textsf{Go}) = \frac{\overbrace{P(A = \textsf{Go} \mid W = \textsf{Sunny})}^{5/6~ ✅}\overbrace{P(W = \textsf{Sun})}^{1/2~ ✅}}{\underbrace{P(A = \textsf{Go})}_{❓}}
\]</span></p>
<ul>
<li><span class="math inline">\(P(A = \textsf{Go})\)</span> is trickier: the probability that Ana goes out <strong>regardless of what the weather is</strong>. But there are only two possible weather outcomes! So we just compute</li>
</ul>
<p><span class="math display">\[
\begin{align*}
&amp;P(A = \textsf{Go}) = \sum_{\omega \in S(W)}P(A = \textsf{Go}, \omega) = \sum_{\omega \in S(W)}P(A = \textsf{Go} \mid \omega)P(\omega) \\
&amp;= P(A = \textsf{Go} \mid W = \textsf{Rain})P(W = \textsf{Rain}) + P(A = \textsf{Go} \mid W = \textsf{Sun})P(W = \textsf{Sun}) \\
&amp;= \left( \frac{1}{2} \right)\left( \frac{1}{2} \right) + \left( \frac{5}{6} \right)\left( \frac{1}{2} \right) = \frac{1}{4} + \frac{5}{12} = \frac{2}{3}
\end{align*}
\]</span></p>
</section>
<section id="putting-it-all-together" class="level2 smaller-math">
<h2 class="smaller-math anchored" data-anchor-id="putting-it-all-together">Putting it All Together</h2>
<p><span class="math display">\[
\begin{align*}
P(W = \textsf{Sun} \mid A = \textsf{Go}) &amp;= \frac{\overbrace{P(A = \textsf{Go} \mid W = \textsf{Sunny})}^{3/4~ ✅}\overbrace{P(W = \textsf{Sun})}^{1/2~ ✅}}{\underbrace{P(A = \textsf{Go})}_{1/2~ ✅}} \\
&amp;= \frac{\left(\frac{3}{4}\right)\left(\frac{1}{2}\right)}{\frac{1}{2}} = \frac{\frac{3}{8}}{\frac{1}{2}} = \frac{3}{4}.
\end{align*}
\]</span></p>
<ul>
<li>Given that we see Ana at the party, we should <strong>update our beliefs</strong>, so that <span class="math inline">\(P(W = \textsf{Sun}) = \frac{3}{4}, P(W = \textsf{Rain}) = \frac{1}{4}\)</span>.</li>
</ul>
</section>
<section id="a-scarier-example" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="a-scarier-example">A Scarier Example</h2>
<ul>
<li>Bo worries he has a <strong>rare disease</strong>. He takes a test with <strong>99% accuracy</strong> and tests <strong>positive</strong>. What’s the probability Bo has the disease? (Intuition: 99%? …Let’s do the math!)</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><span class="math inline">\(H \in \{\textsf{sick}, \textsf{healthy}\}, T \in \{\textsf{T}^+, \textsf{T}^-\}\)</span></li>
<li><strong>The test</strong>: 99% accurate. <span class="math inline">\(\Pr(T = \textsf{T}^+ \mid H = \textsf{sick}) = 0.99\)</span>, <span class="math inline">\(\Pr(T = \textsf{T}^- \mid H = \textsf{healthy}) = 0.99\)</span>.</li>
<li><strong>The disease</strong>: 1 in 10K. <span class="math inline">\(\Pr(H = \textsf{sick}) = \frac{1}{10000}\)</span></li>
<li><strong>What do we want to know?</strong> <span class="math inline">\(\Pr(H = \textsf{sick} \mid T = \textsf{T}^+)\)</span></li>
<li><strong>How do we get there?</strong></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/bayes.jpg" class="img-fluid figure-img" style="width:65.0%"></p>
<figcaption class="figure-caption">This photo, originally thought to be of Thomas Bayes, turns out to be <a href="https://www.york.ac.uk/depts/maths/histstat/bayespic.htm">probably someone else</a>… <span class="math inline">\(\Pr(\textsf{Bayes})\)</span>?</figcaption>
</figure>
</div>
</div>
</div>
<div class="notes">
<p><span class="math inline">\(H\)</span> for health, <span class="math inline">\(T\)</span> for test result</p>
<p>Photo credit: https://thedatascientist.com/wp-content/uploads/2019/04/reverend-thomas-bayes.jpg</p>
</div>
</section>
<section id="section-4" class="level2 unnumbered small-math">
<h2 class="unnumbered small-math anchored" data-anchor-id="section-4"></h2>
<p><span class="math display">\[
\begin{align*}
\Pr(H = \textsf{sick} \mid T = \textsf{T}^+) &amp;= \frac{\Pr(T = \textsf{T}^+ \mid H = \textsf{sick})\Pr(H = \textsf{sick})}{\Pr(T = \textsf{T}^+)} \\
&amp;= \frac{(0.99)\left(\frac{1}{10000}\right)}{(0.99)\left( \frac{1}{10000} \right) + (0.01)\left( \frac{9999}{10000} \right)}
\end{align*}
\]</span></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>p_sick <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">10000</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>p_healthy <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> p_sick</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>p_pos_given_sick <span class="ot">&lt;-</span> <span class="fl">0.99</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>p_neg_given_sick <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> p_pos_given_sick</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>p_neg_given_healthy <span class="ot">&lt;-</span> <span class="fl">0.99</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>p_pos_given_healthy <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> p_neg_given_healthy</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>numer <span class="ot">&lt;-</span> p_pos_given_sick <span class="sc">*</span> p_sick</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>denom1 <span class="ot">&lt;-</span> numer</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>denom2 <span class="ot">&lt;-</span> p_pos_given_healthy <span class="sc">*</span> p_healthy</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>final_prob <span class="ot">&lt;-</span> numer <span class="sc">/</span> (denom1 <span class="sc">+</span> denom2)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>final_prob</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.009803922</code></pre>
</div>
</div>
<ul>
<li>… Less than 1% 😱</li>
</ul>
</section>
<section id="proof-in-the-pudding" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="proof-in-the-pudding">Proof in the Pudding</h2>
<ul>
<li>Let’s generate a dataset of <strong>5,000</strong> people, using <span class="math inline">\(\Pr(\textsf{Disease}) = \frac{1}{10000}\)</span></li>
</ul>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Disease rarity</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>p_disease <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">10000</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1K people</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>num_people <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Give them ids</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>ppl_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id=</span><span class="fu">seq</span>(<span class="dv">1</span>,num_people))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Whether they have the disease or not</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>has_disease <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(num_people, <span class="dv">1</span>, p_disease)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>ppl_df <span class="ot">&lt;-</span> ppl_df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">has_disease=</span>has_disease)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>ppl_df <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
     id has_disease
  &lt;int&gt;       &lt;int&gt;
1     1           0
2     2           0
3     3           0
4     4           0
5     5           0
6     6           0</code></pre>
</div>
</div>
</section>
<section id="binary-variable-trick" class="level2 smaller crunch-code">
<h2 class="smaller crunch-code anchored" data-anchor-id="binary-variable-trick">Binary Variable Trick</h2>
<ul>
<li>Since <code>has_disease</code> <span class="math inline">\(\in \{0, 1\}\)</span>, we can use
<ul>
<li><code>sum(has_disease)</code> to obtain the <strong>count</strong> of people with the disease, or</li>
<li><code>mean(has_disease)</code> to obtain the <strong>proportion</strong> of people who have the disease</li>
</ul></li>
<li>To see this (or, if you forget in the future), just make a fake dataset with a binary variable and 3 rows, and think about <strong>sums</strong> vs.&nbsp;<strong>means</strong> of that variable:</li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>binary_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>binary_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
     id     x
  &lt;dbl&gt; &lt;dbl&gt;
1     1     0
2     2     1
3     3     0</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<p>Taking the <strong>sum</strong> tells us: <strong>one</strong> row where <code>x == 1</code>:</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(binary_df<span class="sc">$</span>x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>Taking the <strong>mean</strong> tells us: <strong>1/3</strong> of rows have <code>x == 1</code>:</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(binary_df<span class="sc">$</span>x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3333333</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="applying-this-to-the-disease-data" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="applying-this-to-the-disease-data">Applying This to the Disease Data</h2>
<ul>
<li>If we want the <strong>number</strong> of people who have the disease:</li>
</ul>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the *number* of people who have the disease</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(ppl_df<span class="sc">$</span>has_disease)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<ul>
<li>If we want the <strong>proportion</strong> of people who have the disease:</li>
</ul>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the *proportion* of people who have the disease</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ppl_df<span class="sc">$</span>has_disease)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1e-04</code></pre>
</div>
</div>
<ul>
<li>(And if you dislike scientific notation like I do…)</li>
</ul>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(<span class="fu">mean</span>(ppl_df<span class="sc">$</span>has_disease), <span class="at">scientific =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "0.0001"</code></pre>
</div>
</div>
<div class="notes">
<p>(Foreshadowing Monte Carlo methods)</p>
</div>
</section>
<section id="data-generating-process-test-results" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="data-generating-process-test-results">Data-Generating Process: Test Results</h2>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Data Generating Process</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>take_test <span class="ot">&lt;-</span> <span class="cf">function</span>(is_sick) {</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (is_sick) {</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">rbinom</span>(<span class="dv">1</span>,<span class="dv">1</span>,p_pos_given_sick))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">rbinom</span>(<span class="dv">1</span>,<span class="dv">1</span>,p_pos_given_healthy))</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>ppl_df[<span class="st">'test_result'</span>] <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(ppl_df<span class="sc">$</span>has_disease, take_test))</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>num_positive <span class="ot">&lt;-</span> <span class="fu">sum</span>(ppl_df<span class="sc">$</span>test_result)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>p_positive <span class="ot">&lt;-</span> <span class="fu">mean</span>(ppl_df<span class="sc">$</span>test_result)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="fu">paste0</span>(num_positive,<span class="st">" positive tests / "</span>,num_people,<span class="st">" total = "</span>,p_positive))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>113 positive tests / 10000 total = 0.0113</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#disp(ppl_df %&gt;% head(50), obs_per_page = 3)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>ppl_df <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1     1           0           0
2     2           0           0
3     3           0           0
4     4           0           0
5     5           0           0
6     6           0           0</code></pre>
</div>
</div>
</section>
<section id="zooming-in-on-positive-tests" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="zooming-in-on-positive-tests">Zooming In On Positive Tests</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pos_ppl <span class="ot">&lt;-</span> ppl_df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(test_result <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co">#disp(pos_ppl, obs_per_page = 10)</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>pos_ppl <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1    87           1           1
2   114           0           1
3   177           0           1
4   216           0           1
5   259           0           1
6   330           0           1</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>Bo doesn’t have it, and neither do 110 of the 111 total people who tested positive!</li>
<li>But, in the real world, we only observe <span class="math inline">\(T\)</span></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/pgm_sick.svg" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="zooming-in-on-disease-havers" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="zooming-in-on-disease-havers">Zooming In On Disease-Havers</h2>
<ul>
<li>What if we look at only those who actually have the disease? Maybe the cost of 111 people panicking is worth it if we correctly catch those who do have it?</li>
</ul>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#disp(ppl_df[ppl_df$has_disease == 1,])</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>ppl_df[ppl_df<span class="sc">$</span>has_disease <span class="sc">==</span> <span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1    87           1           1</code></pre>
</div>
</div>
<p>Is this always going to be the case?</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Num with disease: 0
Proportion with disease: 0
Number of positive tests: 69</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 3
# ℹ 3 variables: id &lt;int&gt;, has_disease &lt;int&gt;, test_result &lt;int&gt;</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#disp(simulate_disease(5000, 1/10000))</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">simulate_disease</span>(<span class="dv">5000</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Num with disease: 0
Proportion with disease: 0
Number of positive tests: 42</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 3
# ℹ 3 variables: id &lt;int&gt;, has_disease &lt;int&gt;, test_result &lt;int&gt;</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="worst-case-worlds" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="worst-case-worlds">Worst-Case Worlds</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">1000</span>)) {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  sim_result <span class="ot">&lt;-</span> <span class="fu">simulate_disease</span>(<span class="dv">5000</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">10000</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">return_all_detected =</span> <span class="cn">FALSE</span>, <span class="at">return_df =</span> <span class="cn">FALSE</span>, <span class="at">return_info =</span> <span class="cn">TRUE</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>sim_result<span class="sc">$</span>all_detected) {</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">writeLines</span>(<span class="fu">paste0</span>(<span class="st">"World #"</span>,i,<span class="st">" / 1000 ("</span>,sim_result<span class="sc">$</span>num_people,<span class="st">" people):"</span>))</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(sim_result<span class="sc">$</span>df)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">writeLines</span>(<span class="st">'</span><span class="sc">\n</span><span class="st">'</span>)</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>World #167 / 1000 (5000 people):
# A tibble: 1 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1  3597           1           0


World #231 / 1000 (5000 people):
# A tibble: 1 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1  3431           1           0


World #271 / 1000 (5000 people):
# A tibble: 2 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1   506           1           0
2  2748           1           1


World #458 / 1000 (5000 people):
# A tibble: 1 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1  4911           1           0


World #686 / 1000 (5000 people):
# A tibble: 1 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1   905           1           0


World #790 / 1000 (5000 people):
# A tibble: 1 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1   268           1           0


World #878 / 1000 (5000 people):
# A tibble: 1 × 3
     id has_disease test_result
  &lt;int&gt;       &lt;int&gt;       &lt;int&gt;
1  3869           1           0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span>(<span class="dv">4</span> <span class="sc">/</span> <span class="dv">5000000</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "0.0000008"</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>How unlikely is this? Math:</p>
<p><span class="math display">\[
\begin{align*}
\Pr(\textsf{T}^- \cap \textsf{Sick}) &amp;= \Pr(\textsf{T}^- \mid \textsf{Sick})\Pr(\textsf{Sick}) \\
&amp;= (0.01)\frac{1}{10000} \\
&amp;= \frac{1}{1000000}
\end{align*}
\]</span></p>
<p>Computers:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>result_df <span class="ot">&lt;-</span> <span class="fu">simulate_disease</span>(<span class="dv">1000000</span>, <span class="dv">1</span><span class="sc">/</span><span class="dv">10000</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">return_full_df =</span> <span class="cn">TRUE</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>false_negatives <span class="ot">&lt;-</span> result_df[result_df<span class="sc">$</span>has_disease <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> result_df<span class="sc">$</span>test_result <span class="sc">==</span> <span class="dv">0</span>,]</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>num_false_negatives <span class="ot">&lt;-</span> <span class="fu">nrow</span>(false_negatives)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="fu">paste0</span>(<span class="st">"False Negatives: "</span>,num_false_negatives,<span class="st">", Total Cases: "</span>, <span class="fu">nrow</span>(result_df)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>False Negatives: 2, Total Cases: 1000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>false_negative_rate <span class="ot">&lt;-</span> num_false_negatives <span class="sc">/</span> <span class="fu">nrow</span>(result_df)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>false_negative_rate_decimal <span class="ot">&lt;-</span> <span class="fu">format</span>(false_negative_rate, <span class="at">scientific =</span> <span class="cn">FALSE</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="fu">paste0</span>(<span class="st">"False Negative Rate: "</span>, false_negative_rate_decimal))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>False Negative Rate: 0.000002</code></pre>
</div>
</div>
<p>(Perfect match!)</p>
</div>
</div>
</section>
<section id="bayes-takeaway" class="level2">
<h2 class="anchored" data-anchor-id="bayes-takeaway">Bayes: Takeaway</h2>
<ul>
<li>Bayesian approach <strong>allows new evidence to be weighed against existing evidence</strong>, with <strong>statistically principled</strong> way to derive these weights:</li>
</ul>
<p><span class="math display">\[
\begin{array}{ccccc}
\Pr_{\text{post}}(\mathcal{H}) &amp;\hspace{-6mm}\propto &amp;\hspace{-6mm} \Pr(X \mid \mathcal{H}) &amp;\hspace{-6mm} \times &amp;\hspace{-6mm} \Pr_{\text{pre}}(\mathcal{H}) \\
\text{Posterior} &amp;\hspace{-6mm}\propto &amp;\hspace{-6mm}\text{Evidence} &amp;\hspace{-6mm} \times &amp;\hspace{-6mm} \text{Prior}
\end{array}
\]</span></p>
</section>
<section id="monte-carlo-methods-overview" class="level2" data-name="Monte Carlo">
<h2 data-name="Monte Carlo" class="anchored" data-anchor-id="monte-carlo-methods-overview">Monte Carlo Methods: Overview</h2>
<ul>
<li>You already saw an example, in our rare disease simulation!</li>
<li>Generally, <strong>using computers</strong> (rather than math, “by hand”) <strong>to estimate probabilistic quantities</strong></li>
</ul>
<div class="columns">
<div class="column smaller" style="width:50%;">
<p><strong>Pros:</strong></p>
<ul>
<li>Most real-world processes have no analytic solution</li>
<li>Step-by-step breakdown of complex processes</li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>Cons:</strong></p>
<ul>
<li>Can require immense computing power</li>
<li>⚠️ Can generate <strong>incorrect answers</strong> ⚠️</li>
</ul>
</div>
</div>
<div class="notes">
<p>By step-by-step I mean, a lot of the time you are just walking through, generating the next column using previously-generated columns. Like we did in the example above, generating <code>test_result</code> based on <code>has_disease</code>.</p>
</div>
</section>
<section id="birthday-problem" class="level2">
<h2 class="anchored" data-anchor-id="birthday-problem">Birthday Problem</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>30 people gather in a room together. What is the probability that two of them share the same birthday?</li>
<li>Analytic solution is fun, but requires some thought… Monte Carlo it!</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>gen_bday_room <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">room_num=</span><span class="cn">NULL</span>) {</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  num_people <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  num_days <span class="ot">&lt;-</span> <span class="dv">366</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  ppl_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id=</span><span class="fu">seq</span>(<span class="dv">1</span>,num_people))</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>birthdays <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>num_days, num_people,<span class="at">replace =</span> T)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  ppl_df[<span class="st">'birthday'</span>] <span class="ot">&lt;-</span> birthdays</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(room_num)) {</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    ppl_df <span class="ot">&lt;-</span> ppl_df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">room_num=</span>room_num) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(room_num)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ppl_df)</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>ppl_df <span class="ot">&lt;-</span> <span class="fu">gen_bday_room</span>(<span class="dv">1</span>)</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="co">#disp(ppl_df %&gt;% head())</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>ppl_df <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  room_num    id birthday
     &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;
1        1     1      321
2        1     2      365
3        1     3      353
4        1     4      121
5        1     5       60
6        1     6      174</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-5" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="section-5"></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inefficient version (return_num=FALSE) is for: if you want tibbles of *all* shared bdays for each room</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>get_shared_bdays <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">is_grouped=</span><span class="cn">NULL</span>, <span class="at">return_num=</span><span class="cn">FALSE</span>, <span class="at">return_bool=</span><span class="cn">FALSE</span>) {</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  bday_pairs <span class="ot">&lt;-</span> <span class="fu">tibble</span>()</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(df)<span class="sc">-</span><span class="dv">1</span>)) {</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    i_data <span class="ot">&lt;-</span> df[i,]</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    i_bday <span class="ot">&lt;-</span> i_data<span class="sc">$</span>birthday</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> (i<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span><span class="fu">nrow</span>(df)) {</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>      j_data <span class="ot">&lt;-</span> df[j,]</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>      j_bday <span class="ot">&lt;-</span> j_data<span class="sc">$</span>birthday</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Check if they're the same</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>      same_bday <span class="ot">&lt;-</span> i_bday <span class="sc">==</span> j_bday</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (same_bday) {</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (return_bool) {</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>          <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>        pair_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">i=</span>i,<span class="at">j=</span>j,<span class="at">bday=</span>i_bday)</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(is_grouped)) {</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>          i_room <span class="ot">&lt;-</span> i_data<span class="sc">$</span>room_num</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>          pair_data[<span class="st">'room'</span>] <span class="ot">&lt;-</span> i_room</span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>        bday_pairs <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(bday_pairs, pair_data)</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (return_bool) {</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (return_num) {</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">nrow</span>(bday_pairs))</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(bday_pairs)</span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a><span class="co">#get_shared_bdays(ppl_df)</span></span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a><span class="fu">get_shared_bdays</span>(ppl_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
      i     j  bday
  &lt;int&gt; &lt;int&gt; &lt;int&gt;
1    15    23    98</code></pre>
</div>
</div>
</section>
<section id="section-6" class="level2 unnumbered smaller">
<h2 class="unnumbered smaller anchored" data-anchor-id="section-6"></h2>
<p>Let’s try more rooms…</p>
<div class="columns">
<div class="column" style="width:48%;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get tibbles for each room</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>gen_bday_rooms <span class="ot">&lt;-</span> <span class="cf">function</span>(num_rooms) {</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  rooms_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>()</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (r <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>, num_rooms)) {</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>      cur_room <span class="ot">&lt;-</span> <span class="fu">gen_bday_room</span>(r)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>      rooms_df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(rooms_df, cur_room)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(rooms_df)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>num_rooms <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>rooms_df <span class="ot">&lt;-</span> <span class="fu">gen_bday_rooms</span>(num_rooms)</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>rooms_df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(room_num) <span class="sc">%&gt;%</span> <span class="fu">group_map</span>(<span class="sc">~</span> <span class="fu">get_shared_bdays</span>(.x, <span class="at">is_grouped=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
# A tibble: 1 × 3
      i     j  bday
  &lt;int&gt; &lt;int&gt; &lt;int&gt;
1     2     8    60

[[2]]
# A tibble: 0 × 0

[[3]]
# A tibble: 0 × 0

[[4]]
# A tibble: 2 × 3
      i     j  bday
  &lt;int&gt; &lt;int&gt; &lt;int&gt;
1     2    12   152
2     5    24   119

[[5]]
# A tibble: 1 × 3
      i     j  bday
  &lt;int&gt; &lt;int&gt; &lt;int&gt;
1    23    30     3

[[6]]
# A tibble: 0 × 0

[[7]]
# A tibble: 2 × 3
      i     j  bday
  &lt;int&gt; &lt;int&gt; &lt;int&gt;
1     1    16   182
2     4    29   275

[[8]]
# A tibble: 0 × 0

[[9]]
# A tibble: 1 × 3
      i     j  bday
  &lt;int&gt; &lt;int&gt; &lt;int&gt;
1    12    14   242

[[10]]
# A tibble: 2 × 3
      i     j  bday
  &lt;int&gt; &lt;int&gt; &lt;int&gt;
1    18    21   205
2    19    28   270</code></pre>
</div>
</div>
</div><div class="column" style="width:48%;">
<p>Number of shared birthdays per room:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now just get the # shared bdays</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>shared_per_room <span class="ot">&lt;-</span> rooms_df <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(room_num) <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_map</span>(<span class="sc">~</span> <span class="fu">get_shared_bdays</span>(.x, <span class="at">is_grouped =</span> <span class="cn">TRUE</span>, <span class="at">return_num=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.
Unknown or uninitialised column: `room_num`.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>shared_per_room <span class="ot">&lt;-</span> <span class="fu">unlist</span>(shared_per_room)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>shared_per_room</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 0 0 2 1 0 2 0 1 2</code></pre>
</div>
</div>
<ul>
<li><span class="math inline">\(\widehat{\Pr}(\text{shared})\)</span></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(shared_per_room <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">/</span> num_rooms</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="section-7" class="level2 unnumbered smaller">
<h2 class="unnumbered smaller anchored" data-anchor-id="section-7"></h2>
<ul>
<li>How about <strong>A THOUSAND ROOMS</strong>?</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>num_rooms_many <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>many_rooms_df <span class="ot">&lt;-</span> <span class="fu">gen_bday_rooms</span>(num_rooms_many)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>anyshared_per_room <span class="ot">&lt;-</span> many_rooms_df <span class="sc">%&gt;%</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(room_num) <span class="sc">%&gt;%</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_map</span>(<span class="sc">~</span> <span class="fu">get_shared_bdays</span>(.x, <span class="at">is_grouped =</span> <span class="cn">TRUE</span>, <span class="at">return_bool =</span> <span class="cn">TRUE</span>))</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>anyshared_per_room <span class="ot">&lt;-</span> <span class="fu">unlist</span>(anyshared_per_room)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>anyshared_per_room</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 1 1 0 0 1 1 1 0 0 1 1 1 1 1 1 1 1 1 1 1 0 1 1 1 0 1 0 0 0 0 0 0 0 1 1 1 1
 [38] 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 0 1 0 0 1 0 1 0 1 0 0 0 0 1 0 1 1 1
 [75] 1 1 1 0 1 0 0 0 1 1 1 1 1 0 1 0 1 0 1 0 1 1 0 1 0 0</code></pre>
</div>
</div>
<ul>
<li><span class="math inline">\(\widehat{\Pr}(\text{shared bday})\)</span>?</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># And now the probability estimate</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(anyshared_per_room <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">/</span> num_rooms_many</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.64</code></pre>
</div>
</div>
<ul>
<li>The analytic solution: <span class="math inline">\(\Pr(\text{shared} \mid k\text{ people in room}) = 1 - \frac{366!}{366^{k}(366-k)!}\)</span></li>
<li>In our case: <span class="math inline">\(1 - \frac{366!}{366^{30}(366-30)!} = 1 - \frac{366!}{366^{30}336!} = 1 - \frac{\prod_{i=337}^{366}i}{366^{30}}\)</span></li>
<li><code>R</code> can juust barely handle these numbers:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>(exact_solution <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> (<span class="fu">prod</span>(<span class="fu">seq</span>(<span class="dv">337</span>,<span class="dv">366</span>))) <span class="sc">/</span> (<span class="dv">366</span><span class="sc">^</span><span class="dv">30</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7053034</code></pre>
</div>
</div>
</section>
<section id="wrapping-up" class="level2 smaller nostretch">
<h2 class="smaller nostretch anchored" data-anchor-id="wrapping-up">Wrapping Up</h2>
<style>
#bday-solns-plot {
  width: 50% !important;
}
</style>
<center>
<div class="quarto-embed-nb-cell">
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-fig-width="8" data-fig-height="6" data-execution_count="16">
<div class="cell-output cell-output-display">
<p><img src="index_files/figure-revealjs/bday-solns-plot-output-1.png" id="bday-solns-plot" class="img-fluid"></p>
</div>
</div>
<a class="quarto-notebook-link" id="nblink-1" href="_bday-solutions-plot.ipynb.html">Source: _bday-solutions-plot.ipynb</a></div>
</center>
</section>
<section id="final-note-functions-of-random-variables" class="level2">
<h2 class="anchored" data-anchor-id="final-note-functions-of-random-variables">Final Note: Functions of Random Variables</h2>
<ul>
<li><span class="math inline">\(X \sim U[0,1], Y \sim U[0,1]\)</span>.</li>
<li><span class="math inline">\(P(Y &lt; X^2)\)</span>?</li>
<li>The hard way: solve analytically</li>
<li>The easy way: simulate!</li>
</ul>
</section>
</section>
<section id="lab-2" class="level1" data-stack-name="Lab 2">
<h1 data-stack-name="Lab 2">Lab 2</h1>
<section id="lab-2-demonstrations" class="level2">
<h2 class="anchored" data-anchor-id="lab-2-demonstrations">Lab 2 Demonstrations</h2>
<p><a href="https://jfh.georgetown.domains/dsan5100/share-point/labs/lab-2/lab-2-demo/lab-2-demo-1.html" target="_blank">Lab 2 Demonstrations</a></p>
</section>
<section id="lab-2-assignment-overview" class="level2">
<h2 class="anchored" data-anchor-id="lab-2-assignment-overview">Lab 2 Assignment Overview</h2>
<p><a href="https://jfh.georgetown.domains/dsan5100/share-point/labs/lab-2/lab-2-assignment.html">Lab 2 Assignment</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>