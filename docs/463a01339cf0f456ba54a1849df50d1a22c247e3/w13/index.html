<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jeff Jacobs">

<title>Week 13: Non-Parametric Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"></script><script src="../jjcustom.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../w13/index.html">Week 13: Nov 16</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">DSAN 5100 Section 03 (Thursdays, 12:30-3pm)</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://jfh.georgetown.domains/dsan5100/" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-arrow-left" style="margin-right: 4px"></i>Main Course Page</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-house pe-1"></i> Section 03 Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1: Aug 24</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w02/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2: Aug 31</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w03/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3: Sep 7</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w04/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4: Sep 14</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w05/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5: Sep 20</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w06/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 6: Sep 27</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w07/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 7: Oct 5</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w08/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 8: Oct 12</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w09/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 9: Oct 19</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w10/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 10: Oct 26</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w11/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 11: Nov 2</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w12/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 12: Nov 9</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../w13/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Week 13: Nov 16</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../recordings/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture Recordings</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../extra-videos/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra Videos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../writeups/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extra Writeups</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../cheatsheet-math.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Math Cheatsheet</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://georgetown.instructure.com/courses/173333" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Course Canvas Page <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://calendar.app.google/yMnESMtMNPdKEaPz5" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Book Office Hours <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://forms.gle/QBT621Vmcez4Y99r5" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Suggestion Box <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://jjacobs.me/dsps" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Textbook <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#schedule" id="toc-schedule" class="nav-link active" data-scroll-target="#schedule">Schedule</a></li>
  <li><a href="#guest-speaker" id="toc-guest-speaker" class="nav-link" data-scroll-target="#guest-speaker">Guest Speaker</a>
  <ul class="collapse">
  <li><a href="#dr.-kerrie-carfagno" id="toc-dr.-kerrie-carfagno" class="nav-link" data-scroll-target="#dr.-kerrie-carfagno">Dr.&nbsp;Kerrie Carfagno</a></li>
  </ul></li>
  <li><a href="#non-parametric-analysis" id="toc-non-parametric-analysis" class="nav-link" data-scroll-target="#non-parametric-analysis">Non-Parametric Analysis</a>
  <ul class="collapse">
  <li><a href="#what-makes-it-non-parametric" id="toc-what-makes-it-non-parametric" class="nav-link" data-scroll-target="#what-makes-it-non-parametric">What Makes It ‚ÄúNon-Parametric‚Äù?</a></li>
  <li><a href="#what-if-were-wrong" id="toc-what-if-were-wrong" class="nav-link" data-scroll-target="#what-if-were-wrong">What If We‚Äôre Wrong?</a></li>
  <li><a href="#avoiding-wrongness-disasters" id="toc-avoiding-wrongness-disasters" class="nav-link" data-scroll-target="#avoiding-wrongness-disasters">Avoiding Wrongness Disasters</a></li>
  <li><a href="#procedure-in-general" id="toc-procedure-in-general" class="nav-link" data-scroll-target="#procedure-in-general">Procedure in General</a></li>
  <li><a href="#what-if-we-cant-pair-observations-one-to-one" id="toc-what-if-we-cant-pair-observations-one-to-one" class="nav-link" data-scroll-target="#what-if-we-cant-pair-observations-one-to-one">What If We <em>Can‚Äôt</em> Pair Observations One-to-One?</a></li>
  <li><a href="#computational-efficiency" id="toc-computational-efficiency" class="nav-link" data-scroll-target="#computational-efficiency">Computational Efficiency</a></li>
  <li><a href="#pairwise-comparison-mode" id="toc-pairwise-comparison-mode" class="nav-link" data-scroll-target="#pairwise-comparison-mode">Pairwise Comparison Mode</a></li>
  <li><a href="#ranking-mode" id="toc-ranking-mode" class="nav-link" data-scroll-target="#ranking-mode">Ranking Mode</a></li>
  <li><a href="#example-2022-world-cup" id="toc-example-2022-world-cup" class="nav-link" data-scroll-target="#example-2022-world-cup">Example: 2022 World Cup</a></li>
  <li><a href="#samples-rightarrow-populations" id="toc-samples-rightarrow-populations" class="nav-link" data-scroll-target="#samples-rightarrow-populations">Samples <span class="math inline">\(\rightarrow\)</span> Populations</a></li>
  <li><a href="#the-non-parametric-fork-in-the-road" id="toc-the-non-parametric-fork-in-the-road" class="nav-link" data-scroll-target="#the-non-parametric-fork-in-the-road">The Non-Parametric Fork in the Road</a></li>
  <li><a href="#choosing-non-parametric-hypotheses" id="toc-choosing-non-parametric-hypotheses" class="nav-link" data-scroll-target="#choosing-non-parametric-hypotheses">Choosing <em>Non-Parametric</em> Hypotheses</a></li>
  <li><a href="#sorting-and-ranking-observations" id="toc-sorting-and-ranking-observations" class="nav-link" data-scroll-target="#sorting-and-ranking-observations">Sorting and Ranking Observations</a></li>
  <li><a href="#our-rank-based-test-statistic" id="toc-our-rank-based-test-statistic" class="nav-link" data-scroll-target="#our-rank-based-test-statistic">Our Rank-Based Test Statistic</a></li>
  <li><a href="#simulating-one-null-hypothesis-world" id="toc-simulating-one-null-hypothesis-world" class="nav-link" data-scroll-target="#simulating-one-null-hypothesis-world">Simulating (One) Null-Hypothesis World</a></li>
  <li><a href="#simulating-many-null-hypothesis-worlds" id="toc-simulating-many-null-hypothesis-worlds" class="nav-link" data-scroll-target="#simulating-many-null-hypothesis-worlds">Simulating Many Null-Hypothesis Worlds</a></li>
  <li><a href="#r-time" id="toc-r-time" class="nav-link" data-scroll-target="#r-time">R Time</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 13: Non-Parametric Methods</h1>
<p class="subtitle lead"><em>DSAN 5100: Probabilistic Modeling and Statistical Computing</em><br>Sections 01-04 (Combined Session)</p>
  <div class="quarto-categories">
    <div class="quarto-category">Class Sessions</div>
  </div>
  </div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Jeff Jacobs </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="mailto:jj1088@georgetown.edu" target="_blank"><code>jj1088@georgetown.edu</code></a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Thursday, November 16, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<center>
<a class="h2" href="./slides.html" target="_blank">Open slides in new window ‚Üí</a>
</center>
<section id="schedule" class="level1 smaller small-title crunch-title" data-name="Schedule">
<h1 class="smaller small-title crunch-title" data-name="Schedule">Schedule</h1>
<div class="hidden">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"../_globals.r"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="hidden">
<p><span class="math display">\[
\DeclareMathOperator*{\argmax}{argmax}
\DeclareMathOperator*{\argmin}{argmin}
\newcommand{\bigexp}[1]{\exp\mkern-4mu\left[ #1 \right]}
\newcommand{\bigexpect}[1]{\mathbb{E}\mkern-4mu \left[ #1 \right]}
\newcommand{\convergesAS}{\overset{\text{a.s.}}{\longrightarrow}}
\newcommand{\definedas}{\overset{\text{def}}{=}}
\newcommand{\definedalign}{\overset{\phantom{\text{def}}}{=}}
\newcommand{\eqeventual}{\overset{\mathclap{\text{\small{eventually}}}}{=}}
\newcommand{\Err}{\text{Err}}
\newcommand{\expect}[1]{\mathbb{E}[#1]}
\newcommand{\expectsq}[1]{\mathbb{E}^2[#1]}
\newcommand{\fw}[1]{\texttt{#1}}
\newcommand{\given}{\mid}
\newcommand{\green}[1]{\color{green}{#1}}
\newcommand{\heads}{\outcome{heads}}
\newcommand{\iid}{\overset{\text{\small{iid}}}{\sim}}
\newcommand{\lik}{\mathcal{L}}
\newcommand{\loglik}{\ell}
\newcommand{\mle}{\textsf{ML}}
\newcommand{\nimplies}{\;\not\!\!\!\!\implies}
\newcommand{\orange}[1]{\color{orange}{#1}}
\newcommand{\outcome}[1]{\textsf{#1}}
\newcommand{\param}[1]{{\color{purple} #1}}
\newcommand{\pgsamplespace}{\{\green{1},\green{2},\green{3},\purp{4},\purp{5},\purp{6}\}}
\newcommand{\prob}[1]{P\left( #1 \right)}
\newcommand{\purp}[1]{\color{purple}{#1}}
\newcommand{\sign}{\text{Sign}}
\newcommand{\spacecap}{\; \cap \;}
\newcommand{\spacewedge}{\; \wedge \;}
\newcommand{\tails}{\outcome{tails}}
\newcommand{\Var}[1]{\text{Var}[#1]}
\newcommand{\bigVar}[1]{\text{Var}\mkern-4mu \left[ #1 \right]}
\]</span></p>
</div>
</div>
<p>Today‚Äôs Planned Schedule:</p>
<table class="table">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 60%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: left;">Start</th>
<th style="text-align: left;">End</th>
<th style="text-align: left;">Topic</th>
<th style="text-align: center;">Recording</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Lecture</strong></td>
<td style="text-align: left;">12:30pm</td>
<td style="text-align: left;">1:30pm</td>
<td style="text-align: left;">Guest Speaker! Dr.&nbsp;Kerrie Carfagno</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">1:30pm</td>
<td style="text-align: left;">2:00pm</td>
<td style="text-align: left;"><a href="#non-parametric-analysis">Non-Parametric Analysis ‚Üí</a></td>
<td style="text-align: center;"><a href="../recordings/recording-w13-1.html" target="_blank" class="disabled"><i class="bi bi-film"></i></a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Break!</strong></td>
<td style="text-align: left;">2:00pm</td>
<td style="text-align: left;">2:10pm</td>
<td style="text-align: left;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">2:10pm</td>
<td style="text-align: left;">3:00pm</td>
<td style="text-align: left;"><a href="#bias-variance-tradeoff-introduction">Non-Parametric Methods Lab ‚Üí</a></td>
<td style="text-align: center;"><a href="../recordings/recording-w13-2.html" target="_blank" class="disabled"><i class="bi bi-film"></i></a></td>
</tr>
</tbody>
</table>
</section>
<section id="guest-speaker" class="level1" data-stack-name="Guest Speaker">
<h1 data-stack-name="Guest Speaker">Guest Speaker</h1>
<section id="dr.-kerrie-carfagno" class="level2 smaller crunch-title">
<h2 class="smaller crunch-title anchored" data-anchor-id="dr.-kerrie-carfagno">Dr.&nbsp;Kerrie Carfagno</h2>
<style>
.inline-image {
  margin: 0!important;
  height: 220px;
  float: left;
  margin: 10px !important;
}
</style>
<div class="bio-container">
<p><img src="images/kerrie-gafagno.webp" class="inline-image img-fluid"> Kerrie Carfagno is the <strong>Program Director</strong> for Georgetown‚Äôs <strong>MS</strong> Program in <strong>Environment and Sustainability Management</strong>.</p>
<p>Dr.&nbsp;Carfagno has taught sustainable business and management communication courses with an emphasis on communication strategy, change management, leadership, ethics, and data visualization for more than 15 years.</p>
<p>Carfagno is particularly interested in the financial and ethical impact of climate change on businesses at the industry, corporate, and societal levels. She focuses on how leaders can effectively communicate climate risk (and opportunity) to increase profitability, resiliency, and sustainability.</p>
<p>She employed these concepts in her global sustainability elective courses and her study abroad courses to Scandinavia in partnership with DIS. Carfagno is also a senior fellow at Generation 180, a non-profit org working to inspire and equip people to take action on clean energy.</p>
</div>
</section>
</section>
<section id="non-parametric-analysis" class="level1 page-columns page-full" data-stack-name="Non-Parametric Analysis">
<h1 data-stack-name="Non-Parametric Analysis">Non-Parametric Analysis</h1>
<section id="what-makes-it-non-parametric" class="level2 smaller crunch-images crunch-title shift-footnotes-0 crunch-quarto-layout-panel page-columns page-full">
<h2 class="smaller crunch-images crunch-title shift-footnotes-0 crunch-quarto-layout-panel anchored" data-anchor-id="what-makes-it-non-parametric">What Makes It ‚ÄúNon-Parametric‚Äù?</h2>
<ul>
<li>We‚Äôve talked about how the Normal distribution is ‚Äústandard‚Äù in multiple senses:
<ul>
<li><strong>Empirically</strong>: It arises from common processes in nature, like random walks</li>
<li><strong>Theoretically</strong>: It is the maximum-entropy distribution which encodes <strong>only</strong> knowledge of a <strong>mean</strong> <span class="math inline">\(\mu\)</span> and a <strong>variance</strong> <span class="math inline">\(\sigma^2\)</span>*</li>
</ul></li>
<li>Then we talked about <strong>estimating</strong> these parameters (<span class="math inline">\(\mu\)</span> and <span class="math inline">\(\sigma^2\)</span>) from data: different ways to amalgamate information from an <strong>observed sample</strong> <span class="math inline">\(\mathbf{X} = (X_1, \ldots, X_n)\)</span> to estimate <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\sigma^2\)</span> (unobserved) with <strong>minimal bias and variance</strong></li>
</ul>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/normal-dist-inference.svg" class="img-fluid figure-img" width="340"></p>
</figure>
</div>
</div>
<div id="nonparametric-right" class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<ul>
<li>We therefore <strong>‚Äúfunnel‚Äù</strong> all of the information contained in <span class="math inline">\(\mathbf{X}\)</span> down into estimates of <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\sigma^2\)</span></li>
<li>But‚Ä¶ <strong>what if we‚Äôre wrong?</strong> What if the DGP is <strong>not</strong> drawing from a Normal distribution?</li>
</ul>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Recall that any other distribution implicitly encodes <strong>additional assumptions</strong>, e.g., that the datapoints lie within some bounded range, or have all nonnegative values, etc.</p>
</div></div></section>
<section id="what-if-were-wrong" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="what-if-were-wrong">What If We‚Äôre Wrong?</h2>
<ul>
<li>It is this concern: the fact that <strong>all of our results</strong>, <strong>all of our confidence</strong> about our estimates thus far, come as a result of making <strong>distributional assumptions</strong></li>
<li><strong>Non-parametric</strong> analysis aims to <strong>mitigate</strong> this potential catastrophe, by making <strong>as few distributional assumptions as possible</strong></li>
<li>Recall how the parameters of a distribution (by way of its <strong>Moment Generating Function</strong>) determine <strong>all of the information</strong> you could possibly want to know about the distribution:</li>
</ul>
<table class="table">
<colgroup>
<col style="width: 30%">
<col style="width: 5%">
<col style="width: 30%">
<col style="width: 5%">
<col style="width: 30%">
</colgroup>
<thead>
<tr class="header">
<th>Type of Distribution</th>
<th>+</th>
<th>Parameter Values</th>
<th>=</th>
<th>All Possible Info (MGF)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Normal <span class="math inline">\(\mathcal{N}(\mu, \sigma^2)\)</span></td>
<td>+</td>
<td><span class="math inline">\(\mu = m\)</span>, <span class="math inline">\(\sigma^2 = s\)</span></td>
<td>=</td>
<td><span class="math inline">\(M_t(X) = \exp[mt + s^2t^2/2]\)</span></td>
</tr>
<tr class="even">
<td>Uniform <span class="math inline">\(\mathcal{U}(\alpha,\beta)\)</span></td>
<td>+</td>
<td><span class="math inline">\(\alpha = a\)</span>, <span class="math inline">\(\beta = b\)</span></td>
<td>=</td>
<td><span class="math inline">\(M_t(X) = \frac{e^{tb} - e^{ta}}{t(b-a)}\)</span></td>
</tr>
<tr class="odd">
<td>Poisson <span class="math inline">\(\mathcal{P}(\lambda)\)</span></td>
<td>+</td>
<td><span class="math inline">\(\lambda = \ell\)</span></td>
<td>=</td>
<td><span class="math inline">\(M_t(X) = \exp[\ell(e^t - 1)]\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="avoiding-wrongness-disasters" class="level2 smaller crunch-title crunch-math smaller-math smaller-inline crunch-ul crunch-p">
<h2 class="smaller crunch-title crunch-math smaller-math smaller-inline crunch-ul crunch-p anchored" data-anchor-id="avoiding-wrongness-disasters">Avoiding Wrongness Disasters</h2>
<ul>
<li>Instead of trying to estimate <strong>all possible info</strong> about the underlying distribution, we only estimate <strong>one piece of information</strong> that we need to <strong>test a hypothesis</strong></li>
<li>Example: for populations <span class="math inline">\(\chi\)</span>, <span class="math inline">\(\psi\)</span>, if <span class="math inline">\(H_A: \mu_\chi &gt; \mu_\psi\)</span>, skip intermediate step of estimating distributions <span class="math inline">\(\mathcal{D}_\chi(\param{\theta})\)</span>, <span class="math inline">\(\mathcal{D}_\psi(\param{\theta})\)</span> from samples <span class="math inline">\(\mathbf{X}\)</span>, <span class="math inline">\(\mathbf{Y}\)</span>!</li>
<li>Instead, just directly ‚Äúextract‚Äù <strong>greater than</strong> vs.&nbsp;<strong>not greater than</strong> info from <span class="math inline">\(\mathbf{X}\)</span> and <span class="math inline">\(\mathbf{Y}\)</span></li>
<li>It will help us to define a <span class="math inline">\(\text{Sign}(\cdot)\)</span> function:</li>
</ul>
<p><span class="math display">\[
\text{Sign}(x) = \begin{cases}\phantom{-}1 &amp;\text{if } x &gt; 0 \\ \phantom{-}0 &amp;\text{if }x = 0 \\ -1 &amp;\text{if }x &lt; 0\end{cases}
\]</span></p>
<ul>
<li>If <span class="math inline">\(\mathbf{X} = (15, 7, 11, 3)\)</span>, <span class="math inline">\(\mathbf{Y} = (-3, 4, 1, 4)\)</span>, we can compute a ‚Äúgreater-than score‚Äù:</li>
</ul>
<p><span class="math display">\[
\begin{align*}
\sum_{i=1}^N \sign(X_i - Y_i) &amp;= \sign(15 - (-3)) + \sign(7-4) + \sign(11-1) + \sign(3-4) \\
&amp;= 1 + 1 + 1 + -1 = 2
\end{align*}
\]</span></p>
<ul>
<li>So long as <strong>slots are comparable</strong> (notice <span class="math inline">\(\mathbf{X}, \mathbf{Y}\)</span> are <strong>ordered</strong>), we can compare this with <span class="math inline">\(0\)</span>, our expectation if <span class="math inline">\(\chi = \psi\)</span>, <strong>regardless of underlying distributions <span class="math inline">\(\mathcal{D}_\chi, \mathcal{D}_\psi\)</span></strong>.</li>
</ul>
</section>
<section id="procedure-in-general" class="level2 smaller crunch-title crunch-math">
<h2 class="smaller crunch-title crunch-math anchored" data-anchor-id="procedure-in-general">Procedure in General</h2>
<ul>
<li><span class="math inline">\(\mathbf{X}\)</span>: size-<span class="math inline">\(N\)</span> sample from population <span class="math inline">\(\chi\)</span>; <span class="math inline">\(\mathbf{Y}\)</span>: size-<span class="math inline">\(N\)</span> sample from population <span class="math inline">\(\psi\)</span></li>
<li>(Rather than estimating <span class="math inline">\(\mathcal{D}_\chi\)</span> from <span class="math inline">\(\mathbf{X}\)</span> and <span class="math inline">\(\mathcal{D}_\psi\)</span> from <span class="math inline">\(\mathbf{Y}\)</span>), we directly <strong>pair</strong> datapoints <span class="math inline">\(X_i \in \mathbf{X}\)</span> and <span class="math inline">\(Y_i \in \mathbf{Y}\)</span> and compute the <strong>sign</strong> of their difference:</li>
</ul>
<p><span class="math display">\[
\text{GT}_i(X_i, Y_i) = \text{Sign}(X_{i} - Y_{i}) = \begin{cases}
\phantom{-}1 &amp;\text{if }X_{i} &gt; Y_{i}, \\
\phantom{-}0 &amp;\text{if }X_{i} = Y_{i}, \\
-1 &amp;\text{if }X_{i} &lt; Y_{i}
\end{cases}
\]</span></p>
<ul>
<li><p>We can then <strong>sum</strong> each pair‚Äôs score into an aggregate score:</p>
<p><span class="math display">\[
  \text{GT}(\mathbf{X}, \mathbf{Y}) = \sum_{i=1}^NGT_i(X_i,Y_i)
  \]</span></p>
<p>such that if <span class="math inline">\(\chi\)</span> and <span class="math inline">\(\psi\)</span> are in fact <strong>the same population</strong>, we expect <span class="math inline">\(GT(\mathbf{X}, \mathbf{Y}) = 0\)</span> (positive and negative values of <span class="math inline">\(GT_i\)</span> cancel each other out, for sufficiently large <span class="math inline">\(N\)</span>)</p></li>
<li><p>Non-parametric tests which use this value as a <strong>test statistic</strong> are called <strong>Sign tests</strong> <!-- * Note how I'm leaving it ambiguous how to **aggregate** individual scores $\text{GT}_i(X_i, Y_i)$ into an overall score $\text{GT}(\mathbf{X}, \mathbf{Y})$: this depends on the **context**, e.g., the particular **form** of the hypothesis you're trying to test --></p></li>
</ul>
</section>
<section id="what-if-we-cant-pair-observations-one-to-one" class="level2 title-08">
<h2 class="title-08 anchored" data-anchor-id="what-if-we-cant-pair-observations-one-to-one">What If We <em>Can‚Äôt</em> Pair Observations One-to-One?</h2>
<ul>
<li>For example, what if samples aren‚Äôt the same size: <span class="math inline">\(N_X = |\mathbf{X}| \neq N_Y = |\mathbf{Y}|\)</span>?</li>
<li><em>Intuition</em>: If there is no ‚Äúnatural‚Äù one-to-one pairing of the observations, we can instead consider <strong>all possible pairs</strong> <span class="math inline">\((X_{i}, Y_{j}) \in \mathbf{X} \times \mathbf{Y}\)</span></li>
<li>We can then count how often <span class="math inline">\(X_i &gt; Y_j\)</span>, how often <span class="math inline">\(Y_j &gt; X_i\)</span>, and compare this to our <strong>expectation</strong> of how often these would occur if <span class="math inline">\(\chi = \psi\)</span> (that is, if <span class="math inline">\(\mathbf{X}\)</span> and <span class="math inline">\(\mathbf{Y}\)</span> were in fact drawn from the <strong>same population</strong>)</li>
</ul>
<!-- * Another piece of information we could compute is the **rank** of each datapoint with respect to the **combination** of the two datasets:
* If dataset 1 has size $N_1$ and dataset 2 has size $N_2$: The **greatest value across both datasets** has **rank 1**, the **second-greatest** has **rank 2**, and so on, up to the **lowest value across both datasets** having **rank $N_1 + N_2$** -->
</section>
<section id="computational-efficiency" class="level2">
<h2 class="anchored" data-anchor-id="computational-efficiency">Computational Efficiency</h2>
<ul>
<li>We could just go ahead with this intuition, checking every pair and seeing how often <span class="math inline">\(X_i &gt; Y_j\)</span> vs.&nbsp;how often <span class="math inline">\(Y_j &gt; X_i\)</span>, but this is <strong>computationally expensive</strong> for large samples (requiring <span class="math inline">\(O(N_1N_2)\)</span> comparisons)</li>
<li>So, let‚Äôs walk through an example with pairwise comparisons, but try to think of an equivalent yet <strong>sub-quadratic</strong> method for achieving the same results!</li>
</ul>
</section>
<section id="pairwise-comparison-mode" class="level2 smaller crunch-title crunch-quarto-layout-panel crunch-ul">
<h2 class="smaller crunch-title crunch-quarto-layout-panel crunch-ul anchored" data-anchor-id="pairwise-comparison-mode">Pairwise Comparison Mode</h2>
<ul>
<li>Let <span class="math inline">\(\mathbf{X} = \{5, 9, 7\}, \mathbf{Y} = \{7, 6\}\)</span>, and consider <span class="math inline">\(X_i &gt; Y_j\)</span> vs.&nbsp;<span class="math inline">\(Y_j &gt; X_i\)</span> for all pairs:</li>
<li>Give 1 point to <span class="math inline">\(\mathbf{X}\)</span> if <span class="math inline">\(X_i &gt; Y_j\)</span>, 1 point to <span class="math inline">\(\mathbf{Y}\)</span> if <span class="math inline">\(Y_j &gt; X_i\)</span>, 0.5 points to both if <span class="math inline">\(X_i = Y_j\)</span>.</li>
</ul>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><span class="math inline">\(X_i\)</span></th>
<th style="text-align: center;"><span class="math inline">\(Y_j\)</span></th>
<th style="text-align: center;"><span class="math inline">\(&gt;\)</span></th>
<th style="text-align: center;"><span class="math inline">\(=\)</span></th>
<th style="text-align: center;"><span class="math inline">\(&lt;\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">+1</td>
</tr>
<tr class="even">
<td style="text-align: center;">5</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">+1</td>
</tr>
<tr class="odd">
<td style="text-align: center;">9</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">+1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">9</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">+1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;">7</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">+0.5</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;">7</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">+1</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Final</strong></td>
<td style="text-align: center;"><strong>Score:</strong></td>
<td style="text-align: center;"><span class="math inline">\(S_{\mathbf{X}} = 3.5\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="math inline">\(S_{\mathbf{Y}} = 2.5\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="ranking-mode" class="level2 smaller crunch-title crunch-ul smaller-math small-inline">
<h2 class="smaller crunch-title crunch-ul smaller-math small-inline anchored" data-anchor-id="ranking-mode">Ranking Mode</h2>
<ul>
<li>Now consider the <strong>combined dataset</strong> <span class="math inline">\(\mathbf{Z} = \mathbf{X} \oplus \mathbf{Y} = (5_X, 9_X, 7_X, 7_Y, 6_Y)\)</span></li>
<li>Let‚Äôs see what we get when we <strong>rank the values</strong> in <span class="math inline">\(\mathbf{X}\)</span> and <span class="math inline">\(\mathbf{Y}\)</span> separately, then rank the same values within <span class="math inline">\(\mathbf{Z}\)</span>, keeping track of whether each number is from <span class="math inline">\(\mathbf{X}\)</span> or <span class="math inline">\(\mathbf{Y}\)</span>:</li>
</ul>
<table class="table">
<colgroup>
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
<col style="width: 14%">
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>Values</strong></td>
<td style="text-align: center;"><span class="math inline">\(5_X\)</span></td>
<td style="text-align: center;"><span class="math inline">\(6_Y\)</span></td>
<td style="text-align: center;"><span class="math inline">\(7_X\)</span></td>
<td style="text-align: center;"><span class="math inline">\(7_Y\)</span></td>
<td style="text-align: center;"><span class="math inline">\(9_X\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Rank in <span class="math inline">\(\mathbf{X}\)</span></strong></td>
<td style="text-align: center;"><span class="math inline">\([1]_{X/\mathbf{X}}\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="math inline">\([2]_{X/\mathbf{X}}\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="math inline">\([3]_{X/\mathbf{X}}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\Sigma_{X/\mathbf{X}} = [6]\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>Rank in <span class="math inline">\(\mathbf{Y}\)</span></strong></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="math inline">\([1]_{Y/\mathbf{Y}}\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="math inline">\([2]_{Y/\mathbf{Y}}\)</span></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"><span class="math inline">\(\Sigma_{Y/\mathbf{Y}} = [3]\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>Rank in <span class="math inline">\(\mathbf{Z}\)</span></strong></td>
<td style="text-align: center;"><span class="math inline">\([1]_{X/\mathbf{Z}}\)</span></td>
<td style="text-align: center;">&nbsp;<br><span class="math inline">\([2]_{Y/\mathbf{Z}}\)</span></td>
<td style="text-align: center;"><span class="math inline">\([3.5]_{X/\mathbf{Z}}\)</span></td>
<td style="text-align: center;">&nbsp;<br><span class="math inline">\([3.5]_{Y/\mathbf{Z}}\)</span></td>
<td style="text-align: center;"><span class="math inline">\([5]_{X/\mathbf{Z}}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(\Sigma_{X/\mathbf{Z}} = [9.5]\)</span><br><span class="math inline">\(\Sigma_{Y/\mathbf{Z}} = [5.5]\)</span></td>
</tr>
</tbody>
</table>
<ul>
<li>Thus, by <strong>subtracting</strong> single-sample ranks from combined-sample ranks, we obtain:</li>
<li><span class="math inline">\(S_{\mathbf{X}} = \Sigma_{X/\mathbf{Z}} - \Sigma_{X/\mathbf{X}} = 9.5 - 6 = 3.5\)</span></li>
<li><span class="math inline">\(S_{\mathbf{Y}} = \Sigma_{Y/\mathbf{Z}} - \Sigma_{Y/\mathbf{Y}} = 5.5 - 3 = 2.5\)</span> ü§Ø</li>
<li>And yet, this runs in <span class="math inline">\(O((N_1+N_2)\log(N_1+N_2)) &lt; O(N_1N_2)\)</span></li>
</ul>
</section>
<section id="example-2022-world-cup" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="example-2022-world-cup">Example: 2022 World Cup</h2>
<ul>
<li>Heights (inches) of Welsh vs.&nbsp;US national football teams (<span class="math inline">\(N = 22\)</span> players total):</li>
</ul>
<table class="table">
<colgroup>
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Wales</strong></td>
<td>78</td>
<td>71</td>
<td>76</td>
<td>75</td>
<td>72</td>
<td>70</td>
<td>68</td>
<td>72</td>
<td>69</td>
<td>73</td>
<td>67</td>
<td><span class="math inline">\(\overline{X} \approx 71.91\)</span></td>
</tr>
<tr class="even">
<td><strong>USA</strong></td>
<td>75</td>
<td>68</td>
<td>74</td>
<td>68</td>
<td>68</td>
<td>70</td>
<td>72</td>
<td>67</td>
<td>72</td>
<td>72</td>
<td>70</td>
<td><span class="math inline">\(\overline{Y} \approx 70.55\)</span></td>
</tr>
</tbody>
</table>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ
‚úî dplyr     1.1.2     ‚úî readr     2.1.4
‚úî forcats   1.0.0     ‚úî stringr   1.5.0
‚úî lubridate 1.9.2     ‚úî tibble    3.2.1
‚úî purrr     1.0.2     ‚úî tidyr     1.3.0
‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ
‚úñ dplyr::filter() masks stats::filter()
‚úñ dplyr::lag()    masks stats::lag()
‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>us_heights <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">height=</span><span class="fu">c</span>(<span class="dv">75</span>, <span class="dv">68</span>, <span class="dv">74</span>, <span class="dv">68</span>, <span class="dv">68</span>, <span class="dv">70</span>, <span class="dv">72</span>, <span class="dv">67</span>, <span class="dv">72</span>, <span class="dv">72</span>, <span class="dv">70</span>))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Go metric! Oh well</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#us_heights &lt;- tibble(height=c(190.5, 172.7, 188, 172.7, 172.7, 177.8, 182.9, 170.2, 182.9, 182.9, 177.8)</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>mean_us <span class="ot">&lt;-</span> <span class="fu">mean</span>(us_heights<span class="sc">$</span>height)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#print(mean_us)</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>us_heights <span class="ot">&lt;-</span> us_heights <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Team =</span> <span class="st">"US"</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>wales_heights <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">height=</span><span class="fu">c</span>(<span class="dv">78</span>, <span class="dv">71</span>, <span class="dv">76</span>, <span class="dv">75</span>, <span class="dv">72</span>, <span class="dv">70</span>, <span class="dv">68</span>, <span class="dv">72</span>, <span class="dv">69</span>, <span class="dv">73</span>, <span class="dv">67</span>))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>mean_wales <span class="ot">&lt;-</span> <span class="fu">mean</span>(wales_heights<span class="sc">$</span>height)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#print(mean_wales)</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>mean_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">mean_height =</span> <span class="fu">c</span>(mean_us, mean_wales), <span class="at">Team =</span> <span class="fu">c</span>(<span class="st">"US"</span>, <span class="st">"Wales"</span>))</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>wales_heights <span class="ot">&lt;-</span> wales_heights <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Team =</span> <span class="st">"Wales"</span>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>players <span class="ot">=</span> <span class="fu">bind_rows</span>(us_heights, wales_heights)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(players, <span class="fu">aes</span>(<span class="at">x=</span>height, <span class="at">fill=</span>Team)) <span class="sc">+</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha=</span><span class="fl">0.3</span>, <span class="at">adjust=</span><span class="dv">4</span><span class="sc">/</span><span class="dv">5</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>mean_df,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xintercept=</span>mean_height, <span class="at">color=</span>Team),</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">linewidth =</span> g_linewidth</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">65</span>,<span class="dv">80</span>)) <span class="sc">+</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dsan_theme</span>(<span class="st">"half"</span>) <span class="sc">+</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(cbPalette[<span class="dv">1</span>], cbPalette[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Empirical Distribution of Team Heights"</span>,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Height (inches)"</span>,</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Empirical Density"</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-revealjs/height-hist-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="samples-rightarrow-populations" class="level2 crunch-code">
<h2 class="crunch-code anchored" data-anchor-id="samples-rightarrow-populations">Samples <span class="math inline">\(\rightarrow\)</span> Populations</h2>
<ul>
<li>We know that the <strong>sampled</strong> heights of Welsh football players (<span class="math inline">\(\mathbf{X}\)</span>) are (on average) greater than the <strong>sampled</strong> heights of US football players (<span class="math inline">\(\mathbf{Y}\)</span>).</li>
<li>But are heights in fact greater among the <strong>population</strong> of Welsh football players (<span class="math inline">\(\chi\)</span>), relative to the <strong>population</strong> of US football players (<span class="math inline">\(\psi\)</span>)?</li>
</ul>
</section>
<section id="the-non-parametric-fork-in-the-road" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="the-non-parametric-fork-in-the-road">The Non-Parametric Fork in the Road</h2>
<ul>
<li>Recall: in <strong>parametric tests</strong>, when comparing means, we analyzed the difference in the sample means <strong>relative to their variability</strong> and summarized the sample information in a test statistic: for example, <span class="math inline">\(t = \frac{\overline{X} - \mu_H}{\widehat{\sigma} / \sqrt{N}}\)</span></li>
<li>We <strong>could</strong> compute this test statistic, but it would <strong>implicitly depend on</strong> an assumption of the underlying DGP: that heights follow a <strong>Normal</strong> distribution.</li>
<li>Here, instead, we produce a test statistic based on the <strong>ranks</strong>!</li>
<li>Test statistics should measure how <strong>surprised</strong> we would be if we observed what we observed in a world where the <strong>null hypothesis is true</strong></li>
<li>Equivalently, it should be <strong>low</strong> if the observed difference could feasibly have occurred just due to random noise (i.e., if we‚Äôre looking at noisy data from world where <strong>null hypothesis is true</strong>)</li>
<li>So, let‚Äôs think in these terms about the <strong>ranks</strong> of each datapoint, to develop a non-parametric <strong>test statistic</strong> based on the ranks</li>
</ul>
</section>
<section id="choosing-non-parametric-hypotheses" class="level2 crunch-title title-09">
<h2 class="crunch-title title-09 anchored" data-anchor-id="choosing-non-parametric-hypotheses">Choosing <em>Non-Parametric</em> Hypotheses</h2>
<ul>
<li>The <strong>empirical distributions</strong> from the previous slide, and the <strong>small sample size</strong> (<span class="math inline">\(N_1 = N_2 = 11\)</span>), motivate our use of a nonparametric test!</li>
<li>Assuming <span class="math inline">\(X \sim \mathcal{D}_1\)</span> and <span class="math inline">\(Y \sim \mathcal{D}_2\)</span> (but <strong>not</strong> assuming the <strong>parametric forms</strong> of <span class="math inline">\(\mathcal{D}_1\)</span> or <span class="math inline">\(\mathcal{D}_2\)</span>!), we can test:</li>
<li><span class="math inline">\(H_0: \Pr(X &gt; Y) = \Pr(Y &gt; X)\)</span></li>
<li><span class="math inline">\(H_1: \Pr(X &gt; Y) \neq \Pr(Y &gt; X)\)</span></li>
</ul>
</section>
<section id="sorting-and-ranking-observations" class="level2 smaller crunch-title crunch-table">
<h2 class="smaller crunch-title crunch-table anchored" data-anchor-id="sorting-and-ranking-observations">Sorting and Ranking Observations</h2>
<table class="centered-table table-line-2-3 table-line-4-5 table" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th colspan="2" style="text-align: center; border-right: 2px solid black; font-size: 20pt !important;">Original Data</th>
<th colspan="2" style="text-align: center; border-right: 2px solid black; font-size: 20pt !important;">Sorted Total Samples</th>
<th colspan="2" style="text-align: center; font-size: 20pt !important;">Rank</th>
</tr>
<tr class="odd">
<th style="font-size: 18pt !important">USA</th>
<th style="font-size: 18pt !important; border-right: 2px solid black">Wales</th>
<th style="font-size: 18pt !important">USA</th>
<th style="font-size: 18pt !important; border-right: 2px solid black">Wales</th>
<th style="font-size: 18pt !important">USA</th>
<th style="font-size: 18pt !important">Wales</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>75</td>
<td>78</td>
<td>67</td>
<td>67</td>
<td>1.5</td>
<td>1.5</td>
</tr>
<tr class="even">
<td>68</td>
<td>71</td>
<td>68</td>
<td rowspan="3" style="vertical-align: middle">68</td>
<td style="border-right-width: 0px !important">4.5</td>
<td rowspan="3" style="vertical-align: middle; border-left: 0px">4.5</td>
</tr>
<tr class="odd">
<td>74</td>
<td>76</td>
<td>68</td>
<td style="border-right-width: 0px !important">4.5</td>
</tr>
<tr class="even">
<td>68</td>
<td>75</td>
<td>68</td>
<td style="border-right-width: 0px !important">4.5</td>
</tr>
<tr class="odd">
<td>68</td>
<td>72</td>
<td></td>
<td>69</td>
<td></td>
<td>7</td>
</tr>
<tr class="even">
<td>70</td>
<td>70</td>
<td>70</td>
<td rowspan="2" style="vertical-align: middle">70</td>
<td>9</td>
<td rowspan="2" style="vertical-align: middle">9</td>
</tr>
<tr class="odd">
<td>72</td>
<td>68</td>
<td>70</td>
<td style="border-right-width: 0px !important">9</td>
</tr>
<tr class="even">
<td>67</td>
<td>72</td>
<td></td>
<td>71</td>
<td></td>
<td>11</td>
</tr>
<tr class="odd">
<td rowspan="2" style="vertical-align: middle">72</td>
<td rowspan="2" style="vertical-align: middle">69</td>
<td rowspan="2" style="vertical-align: middle">72</td>
<td rowspan="3" style="vertical-align: middle">72</td>
<td rowspan="2" style="vertical-align: middle">14</td>
<td rowspan="3" style="vertical-align: middle">14</td>
</tr>
<tr class="even">
</tr>
<tr class="odd">
<td rowspan="2" style="vertical-align: middle">72</td>
<td rowspan="2" style="vertical-align: middle">73</td>
<td rowspan="2" style="vertical-align: middle">72</td>
<td rowspan="2" style="vertical-align: middle; border-right-width: 0px !important">14</td>
</tr>
<tr class="even">
<td rowspan="3" style="vertical-align: middle; border-right-width: 2px !important">72</td>
<td rowspan="3" style="vertical-align: middle; border-right-width: 0px !important">14</td>
</tr>
<tr class="odd">
<td rowspan="2" style="vertical-align: middle">72</td>
<td rowspan="2" style="vertical-align: middle">73</td>
<td rowspan="2" style="vertical-align: middle">72</td>
<td rowspan="2" style="vertical-align: middle; border-right-width: 0px !important">14</td>
</tr>
<tr class="even">
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td>73</td>
<td></td>
<td>17</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>74</td>
<td></td>
<td>18</td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>75</td>
<td>75</td>
<td>19.5</td>
<td>19.5</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>76</td>
<td></td>
<td>21</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td>78</td>
<td></td>
<td>22</td>
</tr>
</tbody>
</table>
</section>
<section id="our-rank-based-test-statistic" class="level2 smaller crunch-title crunch-ul crunch-math">
<h2 class="smaller crunch-title crunch-ul crunch-math anchored" data-anchor-id="our-rank-based-test-statistic">Our Rank-Based Test Statistic</h2>
<ul>
<li>Sums of ranks relative to the <strong>combined</strong> dataset: <span class="math inline">\(\Sigma_{X/\mathbf{Z}} = 112.5\)</span>, <span class="math inline">\(\Sigma_{Y/\mathbf{Z}} = 140.5\)</span>.</li>
<li>And then sum the ranks in each group, relative to the same group‚Ä¶ In general, if we have <span class="math inline">\(N\)</span> ranked datapoints (so, datapoints given labels <span class="math inline">\(\{1, 2, \ldots, N\}\)</span>), what will the <strong>sum</strong> of these individual ranks be?</li>
</ul>
<p><span class="math display">\[
\sum_{i=1}^{N}i = \underbrace{\overbrace{(1 + N)}^{N + 1} + \overbrace{(2 + (N-1))}^{N + 1} + \cdots}_{N/2\text{ terms}} = \frac{N(N+1)}{2}
\]</span></p>
<ul>
<li>So, in this case,</li>
</ul>
<p><span class="math display">\[
\Sigma_{X/\mathbf{X}} = \Sigma_{Y/\mathbf{Y}} = \sum_{i=1}^{11}i = \frac{11(12)}{2} = 66
\]</span></p>
<ul>
<li>Giving us the test statistics</li>
</ul>
<p><span class="math display">\[
\begin{align*}
U_X &amp;= 112.5 - 66 = 46.5, \; U_Y = 140.5 - 66 = 74.5 \\
U &amp;= \min\{U_X, U_Y\} = \min\{46.5, 74.5\} = 46.5
\end{align*}
\]</span></p>
</section>
<section id="simulating-one-null-hypothesis-world" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="simulating-one-null-hypothesis-world">Simulating (One) Null-Hypothesis World</h2>
<ul>
<li>One simulation looks as follows:</li>
</ul>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>N1 <span class="ot">&lt;-</span> <span class="dv">11</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>N2 <span class="ot">&lt;-</span> <span class="dv">11</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> N1 <span class="sc">+</span> N2</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>totalRankSum <span class="ot">&lt;-</span> (N <span class="sc">*</span> (N<span class="sc">+</span><span class="dv">1</span>)) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(<span class="fu">paste0</span>(<span class="st">"N1 = "</span>,N1,<span class="st">", N2 = "</span>,N2,<span class="st">" =&gt; Sum(1...(N1+N2)) = "</span>,totalRankSum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>N1 = 11, N2 = 11 =&gt; Sum(1...(N1+N2)) = 253</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>s_1 <span class="ot">&lt;-</span> <span class="fu">runif</span>(N1)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>df_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> s_1, <span class="at">team =</span> <span class="st">"A"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>s_2 <span class="ot">&lt;-</span> <span class="fu">runif</span>(N2)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>df_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> s_2, <span class="at">team =</span> <span class="st">"B"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>df_combined <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df_1, df_2)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>df_combined[<span class="st">'rank'</span>] <span class="ot">&lt;-</span> <span class="fu">rank</span>(df_combined<span class="sc">$</span>x)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>df_combined <span class="sc">|&gt;</span> <span class="fu">arrange</span>(rank) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
       x team   rank
   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
1 0.0282 B         1
2 0.0282 A         2
3 0.0731 B         3
4 0.134  B         4
5 0.135  B         5
6 0.186  A         6</code></pre>
</div>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df_combined <span class="sc">|&gt;</span> <span class="fu">group_by</span>(team) <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">ranksum =</span> <span class="fu">sum</span>(rank)) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">proportion =</span> ranksum <span class="sc">/</span> totalRankSum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 3
  team  ranksum proportion
  &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;
1 A         144      0.569
2 B         109      0.431</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="simulating-many-null-hypothesis-worlds" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="simulating-many-null-hypothesis-worlds">Simulating Many Null-Hypothesis Worlds</h2>
<ul>
<li>And we can repeat this process (say) 10K times:</li>
</ul>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>simulate_ranksums <span class="ot">&lt;-</span> <span class="cf">function</span>(N1, N2) {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  N <span class="ot">&lt;-</span> N1 <span class="sc">+</span> N2</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  totalRankSum <span class="ot">&lt;-</span> (N <span class="sc">*</span> (N<span class="sc">+</span><span class="dv">1</span>)) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  s_1 <span class="ot">&lt;-</span> <span class="fu">runif</span>(N1)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  df_1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> s_1, <span class="at">team =</span> <span class="st">"A"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  s_2 <span class="ot">&lt;-</span> <span class="fu">runif</span>(N2)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  df_2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> s_2, <span class="at">team =</span> <span class="st">"B"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  df_combined <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df_1, df_2)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  df_combined[<span class="st">'rank'</span>] <span class="ot">&lt;-</span> <span class="fu">rank</span>(df_combined<span class="sc">$</span>x)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  ranksum_df <span class="ot">&lt;-</span> df_combined <span class="sc">|&gt;</span> <span class="fu">group_by</span>(team) <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">ranksum =</span> <span class="fu">sum</span>(rank))</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ranksum_df<span class="sc">$</span>ranksum)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>num_sims <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">replicate</span>(num_sims, <span class="fu">simulate_ranksums</span>(<span class="dv">11</span>,<span class="dv">11</span>))</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(results[,<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1] [,2]
 [1,]  133  120
 [2,]   98  155
 [3,]  115  138
 [4,]  166   87
 [5,]  137  116
 [6,]  140  113
 [7,]  146  107
 [8,]  157   96
 [9,]  119  134
[10,]  106  147</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowMeans</span>(results)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 126.407 126.593</code></pre>
</div>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 66.7%;justify-content: center;">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>ranksum_A <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">ranksum=</span>results[<span class="dv">1</span>,], <span class="at">team=</span><span class="st">"A"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>ranksum_A_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(ranksum_A<span class="sc">$</span>ranksum)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>ranksum_B <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">ranksum=</span>results[<span class="dv">2</span>,], <span class="at">team=</span><span class="st">"B"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>ranksum_B_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(ranksum_B<span class="sc">$</span>ranksum)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>mean_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">mean_value =</span> <span class="fu">c</span>(ranksum_A_mean, ranksum_B_mean), <span class="at">team=</span><span class="fu">c</span>(<span class="st">"A"</span>,<span class="st">"B"</span>))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>sim_df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(ranksum_A, ranksum_B)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim_df, <span class="fu">aes</span>(<span class="at">x=</span>ranksum, <span class="at">fill=</span>team)) <span class="sc">+</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">linewidth =</span> g_linewidth, <span class="at">alpha=</span><span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">data=</span>mean_df,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">xintercept =</span> mean_value),</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">linewidth =</span> g_linewidth</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dsan_theme</span>(<span class="st">"half"</span>) <span class="sc">+</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(cbPalette[<span class="dv">1</span>], cbPalette[<span class="dv">2</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-revealjs/ranksum-sim-plot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="r-time" class="level2 crunch-title crunch-code crunch-ul">
<h2 class="crunch-title crunch-code crunch-ul anchored" data-anchor-id="r-time">R Time</h2>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wilcox.test</span>(height <span class="sc">~</span> Team, <span class="at">data=</span>players, <span class="at">exact =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wilcox.test.default(x = DATA[[1L]], y = DATA[[2L]], ...): cannot
compute exact p-value with ties</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Wilcoxon rank sum test with continuity correction

data:  height by Team
W = 46.5, p-value = 0.3705
alternative hypothesis: true location shift is not equal to 0</code></pre>
</div>
</div>
<ul>
<li>We confirm our computed test statistic of <strong>46.5</strong>, and obtain a p-value of about <strong>0.37</strong></li>
<li>Thus, under most confidence levels (like my favorite <span class="math inline">\(\alpha = 0.11\)</span>), we <strong>fail to reject</strong> the null hypothesis <span class="math inline">\(\mathcal{H}_0\)</span></li>
<li>Putting on our Bayes hats, we do <strong>not</strong> increase our degree of belief that height <strong>differs</strong> between the two populations.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>